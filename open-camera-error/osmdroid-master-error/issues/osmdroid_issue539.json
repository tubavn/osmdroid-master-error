{
  "id" : 539,
  "status" : "New",
  "summary" : "Issue loading previously created tiles from MapquestOSM folder",
  "labels" : [ "Type-Defect", "Priority-Medium" ],
  "stars" : 0,
  "commentCount" : 1,
  "comments" : [ {
    "id" : 0,
    "commenterId" : 6252412927856273547,
    "content" : "<b>What steps will reproduce the problem?</b>\n1. Trying to load previously download maptiles from /sdcard/osmdroid/ folder\r\n2. Trying to use my app offline\r\n\r\n<b>What is the expected output? What do you see instead?</b>\n\r\nThe tiles should be loaded offline in the absence of internet connectivity, but when there is no internet connectivity no map is loading.\r\n\r\n\r\n<b>What version of the product are you using? On what operating system?</b>\n\r\nosmdroid-android-4.1.jar\r\nosmbonuspack_v4.4.jar\r\neclipse android sdk\r\n\r\n\r\n<b>Please provide any additional information below.</b>\n\r\nI have create a simple OSM Map application for offline viewing and navigation. While creating the app, I followed the following tutorials:\r\n\r\nhttp://mobiledevstories.wordpress.com/page/2/\r\nhttp://www.haakseth.com/?p=30\r\nhttp://stackoverflow.com/a/22868462/1627599\r\n\r\nThe application is working fine when Internet connectivity is working. But, when there is not internet connection, the app should load tiles from the /sdcard/osmdroid/ folder which is not happening. No tiles are getting loaded when I am offline.\r\n\r\nMy main intention is to allow the users to download tiles of different cities from the internet and use them later when they do not have internet connectivity.\r\n\r\nThe activity which I have created:\r\n\r\npublic class MainActivity extends Activity {\r\n\r\n    double myCurrentLatitude;\r\n    double myCurrentLongitude;\r\n\r\n    // The MapView variable:\r\n    MapView mapView;\r\n\r\n    List&lt;Overlay&gt; mapOverlays;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        // get current location\r\n        GPSTracker tracker = new GPSTracker(this);\r\n        if (tracker.canGetLocation() == false) {\r\n            tracker.showSettingsAlert();\r\n        } else {\r\n            myCurrentLatitude = tracker.getLatitude();\r\n            myCurrentLongitude = tracker.getLongitude();\r\n        }\r\n\r\n        mapView = (MapView) findViewById(R.id.mapview);\r\n        mapView.setClickable(true);\r\n        // mapView.setBuiltInZoomControls(true);\r\n        // for only pinch zoom\r\n        mapView.setMultiTouchControls(true);\r\n        mapView.setTileSource(TileSourceFactory.MAPQUESTOSM);\r\n        mapView.getController().setZoom(15);\r\n        mapView.getController().setCenter(\r\n                new GeoPoint(myCurrentLatitude, myCurrentLongitude));\r\n\r\n//      mapView.getController().setCenter(\r\n//              new GeoPoint(18.9750, 72.8258));\r\n\r\n        mapOverlays = mapView.getOverlays();\r\n\r\n        showMyCurrentLocation();\r\n        showFoodJoint(&quot;1&quot;,22.5850, 88.3750, &quot;Test food&quot;, &quot;Maniktala&quot;);\r\n        showFoodJoint(&quot;2&quot;,22.576600900000000000, 88.367032500000050000, &quot;Test food 2&quot;, &quot;College Street&quot;);\r\n\r\n\r\n        // =====For showing restaurant location on\r\n        // map======================//\r\n\r\n    }\r\n\r\n    // =====For showing my current location on map======================//\r\n    public void showMyCurrentLocation() {\r\n        Drawable myLocationDrawable = this.getResources().getDrawable(\r\n                R.drawable.pin_for_my_location);\r\n\r\n        MapItemizedOverlay itemizedoverlayForMyLocation = new MapItemizedOverlay(\r\n                myLocationDrawable, this);\r\n        itemizedoverlayForMyLocation.setEnabled(true);\r\n\r\n        itemizedoverlayForMyLocation.setEnabled(true);\r\n\r\n        // setting pin to my current position on the map\r\n\r\n        GeoPoint myCurrentPoint = new GeoPoint(myCurrentLatitude,\r\n                myCurrentLongitude);\r\n//      GeoPoint myCurrentPoint = new GeoPoint(18.9750,\r\n//              72.8258);\r\n        OverlayItem overlayitem = new OverlayItem(&quot;Id&quot;,&quot;Hello&quot;, &quot;You are here&quot;,\r\n                myCurrentPoint);\r\n\r\n        itemizedoverlayForMyLocation.addOverlay(overlayitem);\r\n\r\n        mapOverlays.add(itemizedoverlayForMyLocation);\r\n\r\n        mapView.getController().setZoom(15);\r\n        mapView.getController().setCenter(myCurrentPoint);\r\n    }\r\n\r\n    // =====For showing my current location on map======================//\r\n\r\n\r\n    // =====For showing restaurant location======================//\r\n    public void showFoodJoint(String foodJointId,double foodJointLat, double foodJointLon, String foodJointName, String foodJointDescription)\r\n    {\r\n        Drawable restaurantLocationDrawable = this.getResources().getDrawable(\r\n                R.drawable.pin_for_restaurant_location);\r\n        MapItemizedOverlay itemizedoverlayForRestaurant = new MapItemizedOverlay(\r\n                restaurantLocationDrawable, this);\r\n\r\n        GeoPoint myPoint1 = new GeoPoint(foodJointLat, foodJointLon);\r\n        OverlayItem overlayitem2 = new OverlayItem(foodJointId,foodJointName,foodJointDescription, myPoint1);\r\n\r\n        itemizedoverlayForRestaurant.addOverlay(overlayitem2);\r\n\r\n        mapOverlays.add(itemizedoverlayForRestaurant);\r\n    }\r\n\r\n    // =====For showing restaurant location======================//\r\n\r\n\r\n    // For routing\r\n\r\n    // ======================================================================================================\r\n    /**\r\n     * Add a route overlay between two geopoints with Bubble overlays on the\r\n     * route points.\r\n     * \r\n     * @param startPoint\r\n     *            Route start.\r\n     * @param endPoint\r\n     *            Route end.\r\n     */\r\n    // ======================================================================================================\r\n    public void addRouteOverlay(GeoPoint startPoint, GeoPoint endPoint) {\r\n        // road manager\r\n        RoadManager roadManager = new OSRMRoadManager();\r\n\r\n        // start and end points\r\n        ArrayList&lt;GeoPoint&gt; waypoints = new ArrayList&lt;GeoPoint&gt;();\r\n        waypoints.add(startPoint);\r\n        // GeoPoint endPoint = new GeoPoint(48.4, -1.9);\r\n        waypoints.add(endPoint);\r\n        // roadManager.addRequestOption(&quot;routeType=bicycle&quot;);\r\n        // retreive the road between those points\r\n        Road road = roadManager.getRoad(waypoints);\r\n        // Polyline with the route shape\r\n        org.osmdroid.bonuspack.overlays.Polyline roadOverlay = RoadManager\r\n                .buildRoadOverlay(road, this);\r\n        // Polyline to the overlays of your map\r\n        mapView.getOverlays().add(roadOverlay);\r\n        // Refresh the map\r\n        mapView.invalidate();\r\n\r\n    }// ===================================================================================================\r\n\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        getMenuInflater().inflate(R.menu.main, menu);\r\n        return true;\r\n    }\r\n\r\npublic void makeAToast(String str) {\r\n        Toast toast = Toast.makeText(this, str, Toast.LENGTH_LONG);\r\n        toast.setGravity(Gravity.CENTER, 0, 0);\r\n        toast.show();\r\n    }\r\n\r\n}\r\n\r\nWhere am I going wrong?\r\n",
    "timestamp" : 1402897599,
    "attachments" : [ ]
  } ]
}\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\r\n    public void addRouteOverlay(GeoPoint startPoint, GeoPoint endPoint) {\r\n        // road manager\r\n        RoadManager roadManager \u003d new OSRMRoadManager();\r\n\r\n        // start and end points\r\n        ArrayList\u0026lt;GeoPoint\u0026gt; waypoints \u003d new ArrayList\u0026lt;GeoPoint\u0026gt;();\r\n        waypoints.add(startPoint);\r\n        // GeoPoint endPoint \u003d new GeoPoint(48.4, -1.9);\r\n        waypoints.add(endPoint);\r\n        // roadManager.addRequestOption(\u0026quot;routeType\u003dbicycle\u0026quot;);\r\n        // retreive the road between those points\r\n        Road road \u003d roadManager.getRoad(waypoints);\r\n        // Polyline with the route shape\r\n        org.osmdroid.bonuspack.overlays.Polyline roadOverlay \u003d RoadManager\r\n                .buildRoadOverlay(road, this);\r\n        // Polyline to the overlays of your map\r\n        mapView.getOverlays().add(roadOverlay);\r\n        // Refresh the map\r\n        mapView.invalidate();\r\n\r\n    }// \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\r\n\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        getMenuInflater().inflate(R.menu.main, menu);\r\n        return true;\r\n    }\r\n\r\npublic void makeAToast(String str) {\r\n        Toast toast \u003d Toast.makeText(this, str, Toast.LENGTH_LONG);\r\n        toast.setGravity(Gravity.CENTER, 0, 0);\r\n        toast.show();\r\n    }\r\n\r\n}\r\n\r\nWhere am I going wrong?\r\n","timestamp":1402897599,"attachments":[]}]}